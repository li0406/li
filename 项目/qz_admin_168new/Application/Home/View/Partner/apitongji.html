<extend name="Main:baseTemplate" />
<block name="title">
    <title>API接口数据统计</title>
</block>
<block name="style">
<link rel="stylesheet" type="text/css" href="/assets/common/css/select2_metro.css?v={:C('STATIC_VERSION')}" />
<link rel="stylesheet" type="text/css" href="/assets/common/js/plugins/datetimepicker/datepicker.css?v={:C('STATIC_VERSION')}" />
<link rel="stylesheet" href="/assets/home/order/css/index.css?v={:C('STATIC_VERSION')}">
<link rel="stylesheet" type="text/css" href="/assets/home/css/qc.css?v={:C('STATIC_VERSION')}" />
<link href="/assets/common/phpexcel/phpexcel.css?v={:C('STATIC_VERSION')}" rel="stylesheet">
<link href="/assets/common/phpexcel/handsontable.full.min.css?v={:C('STATIC_VERSION')}" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="/assets/common/js/plugins/dataTables/dataTables.bootstrap.min.css?v={:C('STATIC_VERSION')}" />
</block>
<block name="content">
    <section class="content-header">
        <h1>API接口数据统计</h1>
    </section>
    <section class="content">
        <div class="row">
            <div class="col-xs-12">
                <div class="box box-default">
                    <div class="box-header">
                        <form method="get">
                        <form method="get">
                        <div class="row">
                            <div class="col-xs-2">
                                <p>合作商名称：</p>
                                <input class="form-control" type="text" name="hzs_name" placeholder="合作商名称" value="{$Think.get.hzs_name}" autocomplete="off">
                            </div>
                            <div class="col-xs-1">
                                <p>开始时间:</p>
                                <input id="start" class="form-control datepicker" type="text" name="start_time" placeholder="开始时间" value="{$Think.get.start_time}" autocomplete="off">
                            </div>
                            <div class="col-xs-1">
                                <p>结束时间:</p>
                                <input class="form-control datepicker" type="text" name="end_time" placeholder="结束时间" value="{$Think.get.end_time}" autocomplete="off">
                            </div>
                            <div class="col-xs-1">
                                <p>接口状态:</p>
                                <select class="form-control select2 select2-offscree " name="api_state" type="text" placeholder="接口状态" tabindex="-1">
                                    <option value="0">请选择</option>
                                    <option value="1" <if condition="$Think.get.api_state eq '1'">selected</if>>关闭</option>
                                    <option value="2" <if condition="$Think.get.api_state eq '2'">selected</if>>开启</option>
                                </select>
                            </div>
                            <div class="col-xs-2">
                               <p>&nbsp;</p>
                               <button  type="submit" class="btn btn-primary pull-left">查询</button>
                            </div>
                        </div>
                        </form>
                    </div>
                    <div class="box-body">
                        <table id="myTable" class="table table-hover table-bordered ">
                            <thead>
                                <tr>
                                    <th>序号</th>
                                    <th>合作商名称</th>
                                    <th>渠道标识</th>
                                    <th>接收数据</th>
                                    <th>接收成功</th>
                                    <th>接收失败</th>
                                    <th>接口状态</th>
                                </tr>
                            </thead>
                            <tbody>
                                <volist name="list" id="vo" key="ko">
                                    <tr>
                                       <td>{$ko}</td>
                                        <td>{$vo.name}</td>
                                        <td>{$vo.source}</td>
                                        <td>{$vo.apiall}</td>
                                        <td>{$vo.apisuccess}</td>
                                        <td>{$vo.apifail}</td>
                                        <td><eq name="vo.api_state" value="2">开启<else/>关闭</eq></td>
                                    </tr>
                                </volist>
                            </tbody>
                        </table>
                        {$page}
                    </div>
                </div>
            </div>
        </div>
    </section>
</block>
<block name="script">
<script type="text/javascript" src="/assets/common/js/select2.min.js?v={:C('STATIC_VERSION')}"></script>
<script type="text/javascript" src="/assets/common/js/plugins/datetimepicker/bootstrap-datepicker.js?v={:C('STATIC_VERSION')}"></script>
<script type="text/javascript">
    $(function(){
        $("#time").select2();
        $("#time").select2("val","{$Think.get.time}");
        $(".datepicker").datepicker({
            format:"yyyy-mm-dd"
        });

        $("#status").select2();
        $("#status").select2("val","{$Think.get.status}");


        $("select[name=type]").select2();
        $("select[name=type]").select2("val","{$Think.get.type}");
    });

</script>
</block>
